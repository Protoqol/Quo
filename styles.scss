/* Use Tailwind v3 for SCSS support. */
@tailwind base;
@tailwind components;
@tailwind utilities;
@import 'dump';

@font-face {
  font-family: "Inter";
  src: url("/public/fonts/Inter-Variable.ttf");
}

@font-face {
  font-family: "Google-Sans";
  src: url("/public/fonts/Google-Sans-Variable.ttf");
}

@keyframes slide-in-right {
  0% {
    transform: translateX(100%);
    opacity: 0;
  }
  100% {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes fade-out {
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

.animate-toast-in {
  animation: slide-in-right 0.3s ease-out forwards;
}

.animate-toast-out {
  animation: fade-out 0.3s ease-in forwards;
  overflow: hidden;
}

:root {
  font-family: 'Inter', 'Segoe UI', sans-serif;
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-text-size-adjust: 100%;

  @apply transition-all;
}

html {
  @apply bg-slate-50;
  @apply select-none;
  @apply h-screen;
}

body {
  @apply flex;
  @apply flex-col;
  @apply antialiased;
  @apply overflow-hidden;
  @apply text-slate-800;
  @apply h-screen;

  & > div {
    @apply flex flex-col h-full;
  }

  .quo-layout {
    @apply flex flex-row w-full flex-1 overflow-hidden;

    .quo-sidebar {
      @apply relative w-64 shrink-0 -top-[30px] h-screen z-10 bg-slate-900 text-slate-300 flex flex-col border-r border-slate-800 select-none;

      .quo-sidebar-header {
        @apply h-24 pt-[35px] flex flex-col items-center justify-center border-b bg-slate-950 border-slate-800;

        .quo-logo {
          @apply transition-transform duration-300 shrink-0;
        }

        .quo-logo-text {
          @apply text-3xl font-mono font-semibold uppercase mr-4 text-white;
        } 
      }

      .quo-nav {
        @apply flex-1 overflow-y-auto py-4;

        .quo-origin-tabs {
          @apply flex flex-col gap-1 px-3;

          .quo-origin-tab {
            @apply flex items-center justify-between px-3 py-2 rounded-lg cursor-pointer transition-all duration-200 text-sm font-medium;
            @apply text-slate-400 hover:bg-slate-800 hover:text-slate-200;

            span {
              @apply truncate mr-2 flex-1;
              pointer-events: none;
            }

            &.active-tab {
              @apply bg-indigo-600/10 text-indigo-400 border border-indigo-500/20;
            }

            #closeTab {
              @apply opacity-0 transition-opacity duration-200 w-4 h-4 p-0.5 rounded hover:bg-slate-700 hover:text-red-400 shrink-0;
            }

            &:hover #closeTab {
              @apply opacity-100;
            }
          }
        }
      }

      .quo-sidebar-footer {
        @apply p-4 border-t border-slate-800 bg-slate-950/50;

        .loader-container {
          @apply flex items-center gap-3 mb-4 px-2;

          .loader svg {
            @apply text-indigo-500;
          }

          .loader-text {
            @apply text-xs font-medium text-slate-500 italic;
          }
        }

        .quo-btn-clear {
          @apply flex items-center justify-center gap-2 w-full py-2 px-4 rounded-lg;
          @apply bg-slate-800 text-slate-300 text-sm font-medium border border-slate-700;
          @apply transition-all duration-200 hover:bg-slate-700 hover:text-white hover:border-slate-600;

          svg {
            @apply fill-current;
          }
        }
      }
    }

    .quo-main {
      @apply flex-1 flex flex-col h-full bg-slate-50 min-w-0;

      .quo-main-header {
        @apply h-16 border-b border-slate-200 bg-white flex items-center px-8 z-10;

        .input-container {
          @apply flex-1 max-w-2xl mt-1;

          label {
            @apply relative flex items-center;

            .search-icon {
              @apply absolute left-3 text-slate-400;
              pointer-events: none;
            }

            input {
              @apply w-full pl-10 pr-4 py-2 bg-slate-100 border border-transparent rounded-xl text-sm transition-all duration-200;
              @apply focus:bg-white focus:border-pink-500 focus:ring-4 focus:ring-indigo-500/10 outline-none;

              &::placeholder {
                @apply text-slate-500;
              }
            }
          }

          #searchResult {
            @apply ml-4 text-xs font-medium text-slate-400 whitespace-nowrap;
          }
        }
      }

      .quo-body {
        @apply flex-1 overflow-y-auto p-8;

        #quo {
          @apply w-full mx-auto;

          .empty-state {
            @apply flex flex-col items-center justify-center h-64 text-center;

            svg {
              @apply mb-4 text-slate-300;
            }

            p {
              @apply text-slate-600 font-medium;
            }
          }
        }

        .quo-dump-container {
          @apply flex flex-col bg-white border border-slate-200 rounded-2xl mb-6 shadow-sm overflow-hidden transition-all duration-300;

          &:hover {
            @apply shadow-md border-slate-300;
          }

          &.animate-slide-in-top {
            animation: slideInTop 0.4s cubic-bezier(0, 0, 0.2, 1) forwards;
          }

          .time {
            @apply flex justify-between items-center px-6 py-3 bg-slate-50/50 border-b border-slate-100;
            @apply text-[10px] font-bold text-slate-400 uppercase tracking-wider;

            a {
              @apply text-indigo-500 hover:text-indigo-600 transition-colors lowercase font-mono text-xs;
            }
          }

          .quo-actual-dump {
            @apply p-6;

            .quo-title {
              @apply mb-4;

              .file {
                @apply flex flex-col gap-3;

                .backtrace {
                  @apply flex items-center w-max px-3 py-1.5 bg-slate-100 rounded-lg text-xs font-mono text-slate-500;

                  svg {
                    @apply mr-2 text-slate-400;
                  }
                }

                .passed {
                  @apply flex items-center text-sm;

                  span {
                    @apply font-bold text-slate-700;
                    font-family: 'JetBrains Mono', 'Roboto Mono', monospace !important;
                  }

                  svg {
                    @apply mr-2 text-indigo-400;
                  }
                }
              }
            }

            .dumps {
              @apply rounded-xl bg-slate-900 border border-slate-800 overflow-hidden;

              .grouped-dump-wrapper {
                @apply border-b border-slate-800/50 last:border-0;

                &.animate-slide-in-top {
                  animation: slideInTop 0.3s cubic-bezier(0, 0, 0.2, 1) forwards;
                }

                .quo-title {
                  @apply flex px-4 pt-4 mb-0;

                  .file {
                    @apply flex-row items-center gap-3;

                    .backtrace {
                      @apply bg-slate-800/50 border-slate-700/50 text-slate-500 py-1 px-2;
                      font-size: 9px;
                      @apply uppercase tracking-tighter font-bold;

                      svg {
                        @apply w-3 h-3 text-slate-600;
                      }
                    }

                    .passed {
                      @apply text-xs opacity-90;

                      span {
                        @apply text-indigo-300;
                        font-family: 'JetBrains Mono', 'Roboto Mono', monospace !important;
                      }

                      svg {
                        @apply w-4 h-4 text-indigo-500/50;
                      }
                    }
                  }
                }

                .quo-dump {
                  @apply p-4 pt-2 text-[13px] leading-relaxed text-slate-300 relative;
                  font-family: 'JetBrains Mono', 'Roboto Mono', monospace !important;

                  .quo-title {
                    @apply hidden;
                  }

                  [class*='type-'] {
                    @apply absolute right-4 top-2 text-[9px] font-bold uppercase px-1.5 py-0.5 rounded opacity-40 select-none tracking-widest;
                  }

                  .type-string {
                    @apply bg-emerald-500/20 text-emerald-400;
                  }

                  .type-boolean {
                    @apply bg-sky-500/20 text-sky-400;
                  }

                  .type-integer {
                    @apply bg-rose-500/20 text-rose-400;
                  }

                  .type-stdClass {
                    @apply bg-violet-500/20 text-violet-400;
                  }

                  .type-array {
                    @apply bg-amber-500/20 text-amber-400;
                  }
                }
              }
            }
          }
        }
      }
    }
  }

  @keyframes slideInTop {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-slide-in-top {
    animation: slideInTop 0.4s cubic-bezier(0, 0, 0.2, 1) forwards;
  }

  .quo-sidebar-legacy {
    display: none;
  }
}

.titlebar {
  @apply bg-transparent;
  @apply h-[30px];
  @apply select-none;
  @apply grid;
  grid-template-columns: auto max-content;

  > .controls {
    @apply flex;
  }

  button {
    @apply appearance-none;
    @apply p-0;
    @apply m-0;
    @apply border-none;
    @apply inline-flex;
    @apply justify-center;
    @apply items-center;
    @apply w-[40px];
    @apply bg-transparent transition-colors duration-200;

    svg {
      @apply fill-slate-400 transition-colors duration-200;
    }

    &:hover {
      @apply bg-slate-200;

      svg {
        @apply fill-slate-800;
      }
    }
  }

  #titlebar-close {
    &:hover {
      @apply bg-red-500;

      svg {
        @apply fill-white;
      }
    }
  }
}